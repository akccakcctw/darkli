!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Darklight=e()}(this,function(){"use strict";function t(t,e,n){var o=new RegExp("([?&])"+e+"=.*?(&|$)","i"),i=-1!==t.indexOf("?")?"&":"?";return t.match(o)?t.replace(o,"$1"+e+"="+n+"$2"):t+i+e+"="+n}function e(t){var e=window.location.href,n=t.replace(/[[\]]/g,"\\$&"),o=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(e);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}function n(e){var n=t(document.URL,"darklight",e);window.history.pushState(e,null,n),this.box.classList.add("is-active"),this.box.querySelector("[data-darklight-content="+e+"]").classList.add("is-active")}function o(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.box.classList.contains("is-active")&&(this.box.classList.remove("is-active"),this.box.querySelectorAll(".darklight-content").forEach(function(t){return t.classList.remove("is-active")}),!0===t&&window.history.go(-1))}function i(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(t)}function r(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(t)}var a={box:".darklight",contents:".darklight-content",btnOpens:"[data-darklight]",btnClose:".darklight .darklight-close"},c=(function(){function t(t){this.value=t}function e(e){function n(i,r){try{var a=e[i](r),c=a.value;c instanceof t?Promise.resolve(c.value).then(function(t){n("next",t)},function(t){n("throw",t)}):o(a.done?"return":"normal",a.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):r=null}var i,r;this._invoke=function(t,e){return new Promise(function(o,a){var c={key:t,arg:e,resolve:o,reject:a,next:null};r?r=r.next=c:(i=r=c,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function(){function t(){c(this,t),this.version="0.1.0",this.author="Rex Tsou <akccakccwww@gmail.com>",this.bugs="https://github.com/akccakcctw/darklight/issues",this.license="WTFPL",this.moduleName="darklight",this.init()}return s(t,[{key:"openBox",value:function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];n.apply(this,e)}},{key:"closeBox",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];o.apply(this,e)}},{key:"init",value:function(t){var n=this;if(t=Object.assign(a,t),this.box=i(t.box),this.btnOpens=r(t.btnOpens),this.btnClose=i(t.btnClose),null!==this.box){Array.from(this.btnOpens).forEach(function(t){return t.addEventListener("click",function(){n.openBox(t.dataset.darklight)})}),e(this.moduleName)&&this.openBox(e(this.moduleName)),this.btnClose.addEventListener("click",function(){n.closeBox()}),document.addEventListener("mouseup",function(t){var e=i(".darklight .darklight-content");t.target.matches(".darklight .darklight-content")||e.contains(t.target)||n.closeBox()}),document.addEventListener("keyup",function(t){27!==t.keyCode&&8!==t.keyCode||n.closeBox()}),window.addEventListener("popstate",function(){n.closeBox(!1)});var o=i(".darklight .darklight-icon use"),c=o.getAttribute("xlink:href").replace("#close",""),s=document.body.clientWidth;if(s<=767){var l=c+"#close-inverse";o.setAttribute("xlink:href",l)}window.addEventListener("resize",function(){if(s<=767){var t=c+"#close-inverse";o.setAttribute("xlink:href",t)}else if(s>767){var e=c+"#close";o.setAttribute("xlink:href",e)}})}return this}}],[{key:"noConflict",value:function(){return window.Darklight=void 0,t}}]),t}();return"undefined"==typeof exports&&void 0!==window.Darklight&&(console.log("Darklight already defined. Rename it as `OtherDarklight`"),window.OtherDarklight=window.Darklight,window.Darklight=l),l});
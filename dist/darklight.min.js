!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Darklight=e()}(this,function(){"use strict";var t={box:".darklight",contents:".darklight-content",btnOpens:"[data-darklight]",btnClose:".darklight .darklight-close"},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(t)},o=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(t)},r=function(t,e,n){var i=new RegExp("([?&])"+e+"=.*?(&|$)","i"),o=-1!==t.indexOf("?")?"&":"?";return t.match(i)?t.replace(i,"$1"+e+"="+n+"$2"):t+o+e+"="+n},a=void 0,s=function(){function s(){e(this,s),this.version="0.1.0",this.author="Rex Tsou <akccakccwww@gmail.com>",this.bugs="https://github.com/akccakcctw/darklight/issues",this.license="WTFPL",this.init()}return n(s,[{key:"openBox",value:function(t,e){var n=t.target.dataset.darklight,i=r(document.URL,"darklight",n);history.pushState(n,null,i),this.box.classList.add("is-active"),this.box.querySelector("[data-darklight-content="+e+"]").classList.add("is-active")}},{key:"closeBox",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.box.classList.contains("is-active")&&(this.box.classList.remove("is-active"),this.box.querySelectorAll(".darklight-content").forEach(function(t){return t.classList.remove("is-active")}),!0===t&&history.go(-1))}},{key:"init",value:function(e){var n=this;if(e=Object.assign(t,e),this.box=i(e.box),this.btnOpens=o(e.btnOpens),this.btnClose=i(e.btnClose),null!==this.box){Array.from(this.btnOpens).forEach(function(t){return t.addEventListener("click",function(e){n.openBox(e,t.dataset.darklight)})}),this.btnClose.addEventListener("click",function(){n.closeBox()}),document.addEventListener("mouseup",function(t){var e=document.querySelector(".darklight .darklight-content");t.target.matches(".darklight .darklight-content")||e.contains(t.target)||n.closeBox()}),document.addEventListener("keyup",function(t){27!==t.keyCode&&8!==t.keyCode||n.closeBox()}),window.addEventListener("popstate",function(){n.closeBox(!1)});var r=document.querySelector(".darklight .darklight-icon use"),a=r.getAttribute("xlink:href").replace("#close",""),s=document.body.clientWidth;if(s<=767){var c=a+"#close-inverse";r.setAttribute("xlink:href",c)}window.addEventListener("resize",function(){if(s<=767){var t=a+"#close-inverse";r.setAttribute("xlink:href",t)}else if(s>767){var e=a+"#close";r.setAttribute("xlink:href",e)}})}return this}}],[{key:"noConflick",value:function(){return window.Darklight=a,s}}]),s}();return"undefined"==typeof exports&&void 0!==window.Darklight&&(console.log("Darklight already defined. Rename it as `OtherDarklight`"),a=window.Darklight,window.Darklight=s),s});
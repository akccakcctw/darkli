!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Darkli=t()}(this,function(){"use strict";function e(e,t,n){var o=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=-1!==e.indexOf("?")?"&":"?";return e.match(o)?e.replace(o,"$1"+t+"="+n+"$2"):e+i+t+"="+n}function t(e){var t=window.location.href,n=e.replace(/[[\]]/g,"\\$&"),o=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}function n(t){var n=e(document.URL,"darkli",t);window.history.pushState(t,null,n),this.box.classList.add("is-active"),this.box.querySelector("[data-darkli-content="+t+"]").classList.add("is-active")}function o(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.box.classList.contains("is-active")&&(this.box.classList.remove("is-active"),this.box.querySelectorAll(".darkli-content").forEach(function(e){return e.classList.remove("is-active")}),!0===e&&window.history.go(-1))}function i(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)}function r(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(e)}var a={box:".darkli",contents:".darkli-content",btnOpens:"[data-darkli]",btnClose:".darkli .darkli-close"},c=(function(){function e(e){this.value=e}function t(t){function n(i,r){try{var a=t[i](r),c=a.value;c instanceof e?Promise.resolve(c.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(a.done?"return":"normal",a.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?n(i.key,i.arg):r=null}var i,r;this._invoke=function(e,t){return new Promise(function(o,a){var c={key:e,arg:t,resolve:o,reject:a,next:null};r?r=r.next=c:(i=r=c,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(){function e(){c(this,e),this.version="0.1.0",this.author="Rex Tsou <akccakccwww@gmail.com>",this.bugs="https://github.com/akccakcctw/darkli/issues",this.license="WTFPL",this.moduleName="darkli",this.init()}return s(e,[{key:"openBox",value:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];n.apply(this,t)}},{key:"closeBox",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(this,t)}},{key:"init",value:function(e){var n=this;if(e=Object.assign(a,e),this.box=i(e.box),this.btnOpens=r(e.btnOpens),this.btnClose=i(e.btnClose),null!==this.box){Array.from(this.btnOpens).forEach(function(e){return e.addEventListener("click",function(){n.openBox(e.dataset.darkli)})}),t(this.moduleName)&&this.openBox(t(this.moduleName)),this.btnClose.addEventListener("click",function(){n.closeBox()}),document.addEventListener("mouseup",function(e){var t=i(".darkli .darkli-content");e.target.matches(".darkli .darkli-content")||t.contains(e.target)||n.closeBox()}),document.addEventListener("keyup",function(e){27!==e.keyCode&&8!==e.keyCode||n.closeBox()}),window.addEventListener("popstate",function(){n.closeBox(!1)});var o=i(".darkli .darkli-icon use"),c=o.getAttribute("xlink:href").replace("#close",""),s=document.body.clientWidth;if(s<=767){var l=c+"#close-inverse";o.setAttribute("xlink:href",l)}window.addEventListener("resize",function(){if(s<=767){var e=c+"#close-inverse";o.setAttribute("xlink:href",e)}else if(s>767){var t=c+"#close";o.setAttribute("xlink:href",t)}})}return this}}],[{key:"noConflict",value:function(){return window.darkli=void 0,e}}]),e}();return"undefined"==typeof exports&&void 0!==window.darkli&&(console.log("darkli already defined. Rename it as `Otherdarkli`"),window.Otherdarkli=window.darkli,window.darkli=l),l});
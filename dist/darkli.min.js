!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("core-js/modules/es.array.for-each"),require("core-js/modules/es.array.from"),require("core-js/modules/es.array.includes"),require("core-js/modules/es.function.name"),require("core-js/modules/es.object.assign"),require("core-js/modules/es.string.includes"),require("core-js/modules/es.string.iterator"),require("core-js/modules/web.dom-collections.for-each"),require("core-js/modules/es.date.to-string"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.promise"),require("core-js/modules/es.regexp.exec"),require("core-js/modules/es.regexp.to-string"),require("core-js/modules/es.array.iterator"),require("core-js/modules/es.object.keys"),require("core-js/modules/es.string.search"),require("core-js/modules/web.dom-collections.iterator"),require("core-js/modules/web.url"),require("core-js/modules/es.number.constructor"),require("url-search-params-polyfill")):"function"==typeof define&&define.amd?define(["core-js/modules/es.array.for-each","core-js/modules/es.array.from","core-js/modules/es.array.includes","core-js/modules/es.function.name","core-js/modules/es.object.assign","core-js/modules/es.string.includes","core-js/modules/es.string.iterator","core-js/modules/web.dom-collections.for-each","core-js/modules/es.date.to-string","core-js/modules/es.object.to-string","core-js/modules/es.promise","core-js/modules/es.regexp.exec","core-js/modules/es.regexp.to-string","core-js/modules/es.array.iterator","core-js/modules/es.object.keys","core-js/modules/es.string.search","core-js/modules/web.dom-collections.iterator","core-js/modules/web.url","core-js/modules/es.number.constructor","url-search-params-polyfill"],o):(e=e||self).Darkli=o()}(this,function(){"use strict";function r(e,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t={url:"https://github.com/akccakcctw/darkli/issues"},n={box:".darkli",contents:".darkli-content",btnOpens:"[data-darkli]",btnClose:".darkli .darkli-close",heightAuto:!1,closeKeys:[27,8],bodyNoScroll:!0};function s(e,o){var t=1<arguments.length&&void 0!==o?o:window.location.search;return new URLSearchParams(t).get(e)}function i(e,o){return(1<arguments.length&&void 0!==o?o:document).querySelector(e)}function c(n){var s=this;new Promise(function(e){return s.config.beforeOpen&&s.config.beforeOpen(),e()}).then(new Promise(function(e){var o,t=function(e){var o=e.search,t=void 0===o?window.location.search:o,r=e.key,n=void 0===r?"darkli":r,s=e.val,i=new URLSearchParams(t);return i.set(n,s),i.toString()}({key:"darkli",val:n});s.config.bodyNoScroll&&document.body.classList.add("darkli-no-scroll"),window.history.pushState(n,null,"?".concat(t)),s.config.box.classList.add("is-active");var r=["is-active"];return s.config.heightAuto&&r.push("is-height-auto"),(o=s.config.box.querySelector("[data-darkli-content=".concat(n,"]")).classList).add.apply(o,r),e()})).then(new Promise(function(e){return s.config.afterOpen&&s.config.afterOpen(),e()}))}var a=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i;window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,o){o=o||window;for(var t=0;t<this.length;t++)e.call(o,this[t],t,this)}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e=function(){function o(e){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),this.version="0.7.2",this.author="Rex Tsou <akccakccwww@gmail.com>",this.bugs=t,this.license="MIT",this.moduleName="darkli",this.config=Object.assign(n,e),this.init()}return function(e,o,t){o&&r(e.prototype,o),t&&r(e,t)}(o,[{key:"open",value:function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];c.apply(this,o)}},{key:"close",value:function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];(function(){var o=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(this.config.box.classList.contains("is-active")){new Promise(function(e){return o.config.beforeClose&&o.config.beforeClose(),e()}).then(new Promise(function(e){return o.config.bodyNoScroll&&document.body.classList.remove("darkli-no-scroll"),o.config.box.classList.remove("is-active"),o.config.box.querySelectorAll(".darkli-content").forEach(function(e){e.classList.contains("auto-destroy")&&e.parentNode.removeChild(e),e.classList.remove("is-active")}),!0===t&&window.history.go(-1),e()})).then(new Promise(function(e){return o.config.afterClose&&o.config.afterClose(),e()}))}}).apply(this,o)}},{key:"create",value:function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=e.box,t=void 0===o?this.config.box:o,r=e.isExternal,n=void 0!==r&&r,s=e.autoDestroy,i=void 0!==s&&s,c=e.content,a=(+new Date).toString(36),l=document.createElement("div");l.classList.add("darkli-content"),l.setAttribute("data-darkli-content",a),n&&l.classList.add("is-external"),i&&l.classList.add("auto-destroy"),l.innerHTML=c,t.appendChild(l),this.open(a)}).apply(this,o)}},{key:"external",value:function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];(function(e){a.exec(e)&&this.create({content:function(e){return'\n  <div class="darkli-iframe-container">\n    <iframe frameborder="0" src="'.concat(e,'" allowfullscreen></iframe>\n  </div>\n')}(e),isExternal:!0,autoDestroy:!0})}).apply(this,o)}},{key:"init",value:function(){var t=this;if(Object.assign(this.config,{box:i(this.config.box),btnOpens:function(e,o){return(1<arguments.length&&void 0!==o?o:document).querySelectorAll(e)}(this.config.btnOpens),btnClose:i(this.config.btnClose)}),null==this.config.box)throw new Error("config.box cannot be null");Array.from(this.config.btnOpens).forEach(function(e){return e.addEventListener("click",function(){e.dataset.darkli?t.open(e.dataset.darkli):t.external(e.getAttribute("href"))})}),s(this.moduleName)&&this.open(s(this.moduleName));var e;return(e=function(e,o){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=t.namespaceURI,n=document.createElementNS(r,e);return Object.keys(o).forEach(function(e){n.setAttribute(e,o[e])}),t.appendChild(n),t}("polygon",{points:"612,36.004 576.521,0.603 306,270.608 35.478,0.603 0,36.004 270.522,306.011 0,575.997 35.478,611.397      306,341.411 576.521,611.397 612,575.997 341.459,306.011    "})).classList.add("darkli-icon"),e.setAttribute("viewBox","0 0 612 612"),t.config.btnClose.appendChild(e),this.config.btnClose.addEventListener("click",function(){t.close()}),document.addEventListener("mouseup",function(e){var o=i(".darkli .darkli-content");e.target.matches(".darkli .darkli-content")||o.contains(e.target)||t.close()}),document.addEventListener("keyup",function(e){t.config.closeKeys.includes(e.keyCode)&&t.close()}),window.addEventListener("popstate",function(){t.close(!1)}),this}}],[{key:"noConflict",value:function(){return window.darkli=void 0,o}}]),o}();return"undefined"==typeof exports&&void 0!==window.darkli&&(window.Otherdarkli=window.darkli,window.darkli=e),e});

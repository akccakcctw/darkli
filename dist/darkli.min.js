!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Darkli=t()}(this,function(){"use strict";function e(e){var t=window.location.href,n=e.replace(/[[\]]/g,"\\$&"),i=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function t(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)}function n(e){var t=function(e,t,n){var i=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(i)?e.replace(i,"$1"+t+"="+n+"$2"):e+o+t+"="+n}(document.URL,"darkli",e);window.history.pushState(e,null,t),this.box.classList.add("is-active"),this.box.querySelector("[data-darkli-content="+e+"]").classList.add("is-active")}var i={box:".darkli",contents:".darkli-content",btnOpens:"[data-darkli]",btnClose:".darkli .darkli-close"},o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function a(){o(this,a),this.version="0.4.0",this.author="Rex Tsou <akccakccwww@gmail.com>",this.bugs="https://github.com/akccakcctw/darkli/issues",this.license="WTFPL",this.moduleName="darkli",this.init()}return r(a,[{key:"open",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];n.apply(this,t)}},{key:"close",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.box.classList.contains("is-active")&&(this.box.classList.remove("is-active"),this.box.querySelectorAll(".darkli-content").forEach(function(e){return e.classList.remove("is-active")}),!0===e&&window.history.go(-1))}).apply(this,t)}},{key:"create",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.box,n=void 0===t?this.box:t,i=e.content,o=(+new Date).toString(36),r=document.createElement("div");r.classList.add("darkli-content"),r.setAttribute("data-darkli-content",o),r.innerHTML=i,n.appendChild(r),this.open(o)}).apply(this,t)}},{key:"init",value:function(n){var o=this;if(n=Object.assign(i,n),this.box=t(n.box),this.btnOpens=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(e)}(n.btnOpens),this.btnClose=t(n.btnClose),null!==this.box){Array.from(this.btnOpens).forEach(function(e){return e.addEventListener("click",function(){o.open(e.dataset.darkli)})}),e(this.moduleName)&&this.open(e(this.moduleName));!function(){var e=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=n.namespaceURI,o=document.createElementNS(i,e);return Object.keys(t).forEach(function(e){o.setAttribute(e,t[e])}),n.appendChild(o),n}("polygon",{points:"612,36.004 576.521,0.603 306,270.608 35.478,0.603 0,36.004 270.522,306.011 0,575.997 35.478,611.397      306,341.411 576.521,611.397 612,575.997 341.459,306.011    "});e.classList.add("darkli-icon"),e.setAttribute("viewBox","0 0 612 612"),o.btnClose.appendChild(e)}(),this.btnClose.addEventListener("click",function(){o.close()}),document.addEventListener("mouseup",function(e){var n=t(".darkli .darkli-content");e.target.matches(".darkli .darkli-content")||n.contains(e.target)||o.close()}),document.addEventListener("keyup",function(e){27!==e.keyCode&&8!==e.keyCode||o.close()}),window.addEventListener("popstate",function(){o.close(!1)})}return this}}],[{key:"noConflict",value:function(){return window.darkli=void 0,a}}]),a}();return"undefined"==typeof exports&&void 0!==window.darkli&&(console.log("darkli already defined. Rename it as `Otherdarkli`"),window.Otherdarkli=window.darkli,window.darkli=a),a});